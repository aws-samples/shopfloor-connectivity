{
  "AWSVersion": "2022-04-02",
  "Name": "OPCUA to S3, using IPC source and targets",
  "Version": 1,
  "LogLevel": "Trace",
  "ConfigProvider": {
    "JarFiles": [
      "examples/opcua-auto-discovery/build/libs",
      "/Users/leeuwest/Desktop/deploy/opcua/lib"
    ],
    "FactoryClassName": "com.amazonaws.sfc.config.OpcuaAutoDiscoveryConfigProvider"
  },
  "AutoDiscovery": {
      "OPCUA-SOURCE": [
        {
          "NodeId": "ns=0;i=2253",
          "DiscoveryDepth": "10",
          "NodeTypesToDiscover": "All",
          "Exclusions" : ["ServerDiagnostics/.*"]
        },
        {
          "NodeId": "ns=6;s=MyDevice",
          "DiscoveryDepth": "10",
          "NodeTypesToDiscover": "All",
          "Exclusions" : ["ServerDiagnostics/.*"]
        }
      ]
  },
  "Schedules": [
    {
      "Name": "OpcuaToS3S",
      "Interval": 1000,
      "Description": "Read data of all OPCUA data types once per second and send to S3",
      "Active": true,
      "TimestampLevel": "Both",
      "Sources": {
        "OPCUA-SOURCE": [
          "*"
        ]
      },
      "Targets": [
        "DebugTarget",
        "S3Target"
      ]
    }
  ],
  "Sources": {
    "OPCUA-SOURCE": {
      "Name": "OPCUA-SOURCE",
      "ProtocolAdapter": "OPC-UA",
      "AdapterOpcuaServer": "OPCUA-SERVER-1",
      "Description": "OPCUA local server",
      "SourceReadingMode": "Polling",
      "Channels": {
        "ServerStatus": {
          "Name": "ServerStatus",
          "NodeId": "ns=0;i=2256"
        },
        "ServerTime": {
          "Name": "ServerTime",
          "NodeId": "ns=0;i=2256",
          "Selector": "@.currentTime"
        },
        "State": {
          "Name": "State",
          "NodeId": "ns=0;i=2259"
        },
        "ProductName": {
          "Name": "ProductName",
          "NodeId": "ns=0;i=2261"
        },
        "ManufacturerName": {
          "Name": "ManufacturerName",
          "NodeId": "ns=0;i=2263"
        },
        "BuildInfo": {
          "Name": "BuildInfo",
          "NodeId": "ns=0;i=2260"
        },
        "Byte": {
          "Name": "Byte",
          "NodeId": "ns=5;s=Byte"
        },
        "ByteString": {
          "Name": "ByteString",
          "NodeId": "ns=5;s=ByteString"
        },
        "DateTime": {
          "Name": "DateTime",
          "NodeId": "ns=5;s=DateTime"
        },
        "Double": {
          "Name": "Double",
          "NodeId": "ns=5;s=Double"
        },
        "Duration": {
          "Name": "Duration",
          "NodeId": "ns=5;s=Duration"
        },
        "Enumeration": {
          "Name": "Enumeration",
          "NodeId": "ns=5;s=Enumeration"
        },
        "Float": {
          "Name": "Float",
          "NodeId": "ns=5;s=Float"
        },
        "GUID": {
          "Name": "GUID",
          "NodeId": "ns=5;s=GUID"
        },
        "Int16": {
          "Name": "Int16",
          "NodeId": "ns=5;s=Int16"
        },
        "Int32": {
          "Name": "Int32",
          "NodeId": "ns=5;s=Int32"
        },
        "Int64": {
          "Name": "Int64",
          "NodeId": "ns=5;s=Int64"
        },
        "Integer": {
          "Name": "Integer",
          "NodeId": "ns=5;s=Integer"
        },
        "LocaleId": {
          "Name": "LocaleId",
          "NodeId": "ns=5;s=LocaleId"
        },
        "LocalizedText": {
          "Name": "LocalizedText",
          "NodeId": "ns=5;s=LocalizedText"
        },
        "NodeId": {
          "Name": "NodeId",
          "NodeId": "ns=5;s=NodeId"
        },
        "Number": {
          "Name": "Number",
          "NodeId": "ns=5;s=Number"
        },
        "QualifiedName": {
          "Name": "QualifiedName",
          "NodeId": "ns=5;s=QualifiedName"
        },
        "SByte": {
          "Name": "SByte",
          "NodeId": "ns=5;s=SByte"
        },
        "String": {
          "Name": "String",
          "NodeId": "ns=5;s=String"
        },
        "TimeString": {
          "Name": "TimeString",
          "NodeId": "ns=5;s=TimeString"
        },
        "UInt16": {
          "Name": "UInt16",
          "NodeId": "ns=5;s=UInt16"
        },
        "UInt32": {
          "Name": "UInt32",
          "NodeId": "ns=5;s=UInt32"
        },
        "UInt64": {
          "Name": "UInt64",
          "NodeId": "ns=5;s=UInt64"
        },
        "UInteger": {
          "Name": "UInteger",
          "NodeId": "ns=5;s=UInteger"
        },
        "UtcTime": {
          "Name": "UtcTime",
          "NodeId": "ns=5;s=UtcTime"
        },
        "Variant": {
          "Name": "Variant",
          "NodeId": "ns=5;s=Variant"
        },
        "XmlElement": {
          "Name": "XmlElement",
          "NodeId": "ns=5;s=XmlElement"
        },
        "TwoStateDiscreteItem": {
          "Name": "TwoStateDiscreteItem",
          "NodeId": "ns=5;s=TwoStateDiscreteItem"
        },
        "BooleanArray": {
          "Name": "BooleanArray",
          "NodeId": "ns=5;s=BooleanArray"
        },
        "ByteArray": {
          "Name": "ByteArray",
          "NodeId": "ns=5;s=ByteArray"
        },
        "ByteStringArray": {
          "Name": "ByteStringArray",
          "NodeId": "ns=5;s=ByteStringArray"
        },
        "DateTimeArray": {
          "Name": "DateTimeArray",
          "NodeId": "ns=5;s=DateTimeArray"
        },
        "DoubleArray": {
          "Name": "DoubleArray",
          "NodeId": "ns=5;s=DoubleArray"
        },
        "FloatArray": {
          "Name": "FloatArray",
          "NodeId": "ns=5;s=FloatArray"
        },
        "GUIDArray": {
          "Name": "GUIDArray",
          "NodeId": "ns=5;s=GUIDArrayArray"
        },
        "Int16Array": {
          "Name": "Int16Array",
          "NodeId": "ns=5;s=Int16Array"
        },
        "Int32Array": {
          "Name": "Int32Array",
          "NodeId": "ns=5;s=Int32Array"
        },
        "Int64Array": {
          "Name": "Int64Array",
          "NodeId": "ns=5;s=Int64Array"
        },
        "LocalizedTextArray": {
          "Name": "LocalizedTextArray",
          "NodeId": "ns=5;s=LocalizedTextArray"
        },
        "QualifiedNameArray": {
          "Name": "QualifiedNameArray",
          "NodeId": "ns=5;s=QualifiedNameArray"
        },
        "SByteArray": {
          "Name": "SByteArray",
          "NodeId": "ns=5;s=ByteArray"
        },
        "StringArray": {
          "Name": "StringArray",
          "NodeId": "ns=5;s=StringArray"
        },
        "UInt16Array": {
          "Name": "UInt16Array",
          "NodeId": "ns=5;s=UInt16Array"
        },
        "UInt32Array": {
          "Name": "UInt32Array",
          "NodeId": "ns=5;s=UInt32Array"
        },
        "UInt64Array": {
          "Name": "UInt64Array",
          "NodeId": "ns=5;s=UInt64Array"
        },
        "VariantArray": {
          "Name": "VariantArray",
          "NodeId": "ns=5;s=VariantArray"
        },
        "XmlElementArray": {
          "Name": "XmlElementArray",
          "NodeId": "ns=5;s=XmlElementArray"
        },
        "SimulationCounter": {
          "Name": "Counter",
          "NodeId": "ns=3;i=1001"
        },
        "SimulationRandom": {
          "Name": "Random",
          "NodeId": "ns=3;i=1002"
        },
        "SimulationSawtooth": {
          "Name": "Sawtooth",
          "NodeId": "ns=3;i=1003"
        },
        "SimulationSawtoothInt": {
          "Name": "SawtoothInt",
          "NodeId": "ns=3;i=1003"
        },
        "SimulationSinusoid": {
          "Name": "Sinusoid",
          "NodeId": "ns=3;i=1004"
        },
        "SimulationSquare": {
          "Name": "Square",
          "NodeId": "ns=3;i=1005"
        },
        "SimulationTriangle": {
          "Name": "Triangle",
          "NodeId": "ns=3;i=1006"
        }
      }
    }
  },
  "Targets": {
    "DebugTarget": {
      "TargetServer": "DebugTargetServer",
      "Active": true,
      "TargetType": "DEBUG-TARGET"
    },
    "S3Target": {
      "TargetServer": "S3TargetServer",
      "Active": true,
      "Server": "S3TargetServer",
      "TargetType": "AWS-S3",
      "Region": "eu-west-1",
      "BucketName": "sfc-bucket",
      "Interval": 60,
      "BufferSize": 1,
      "Prefix": "opcua-data",
      "CredentialProviderClient": "AwsIotClient",
      "CertificatesAndKeysByFileReference": false
    }
  },
  "ProtocolAdapters": {
    "OPC-UA": {
      "AdapterServer": "OpcuaAdapterServer",
      "AdapterType": "OPCUA",
      "OpcuaServers": {
        "OPCUA-SERVER-1": {
          "Address": "opc.tcp://localhost",
          "Path": "OPCUA/SimulationServer",
          "Port": 53530,
          "ConnectTimeout": "10000",
          "ReadBatchSize": 500,
          "ServerProfile": "ServerProfile1"
        }
      },
      "ServerProfiles": {
        "ServerProfile1": {
          "EventTypes": {
            "EventType1": {
              "NodeId": "ns=9;i=9999",
              "Properties": [
                "99:Property1",
                "99:Property2"
              ],
              "Inherits": "BaseEventType"
            },
            "EventType2": {
              "NodeId": "ns=9;i=9998",
              "Properties": [
                "99:Property3",
                "99:Property4"
              ],
              "Inherits": "EventType1"
            }
          }
        }
      }
    }
  },
  "AdapterServers": {
    "OpcuaAdapterServer": {
      "Address": "localhost",
      "Port": 50000
    }
  },
  "TargetServers": {
    "DebugTargetServer": {
      "Address": "localhost",
      "Port": 60000
    },
    "S3TargetServer": {
      "Address": "localhost",
      "Port": 60001
    }
  },
  "AwsIotCredentialProviderClients": {
    "AwsIotClient": {
      "##IotCredentialEndpoint": "c1alcfbzvfkjpi.credentials.iot.eu-west-1.amazonaws.com",
      "##RoleAlias": "GreengrassV2TokenExchangeRoleAlias",
      "ThingName": "GreengrassCore-1",
      "##Certificate": "/Users/leeuwest/Desktop/AwsIotCreds/Certificates/thingCert.crt",
      "##PrivateKey": "/Users/leeuwest/Desktop/AwsIotCreds/Certificates/privKey.key",
      "##RootCa": "/Users/leeuwest/Desktop/AwsIotCreds/Certificates/rootCA.pem",
      "SkipCredentialsExpiryCheck": false,
      "GreenGrassDeploymentPath": "/Users/leeuwest/Greengrass/v2"
    }
  }
}